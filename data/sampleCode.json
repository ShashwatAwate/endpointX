{
  "language": "javascript",
  "framework": "express",
  "files": [
    {
      "path": "app.js",
      "content": "const express = require('express');\nconst app = express();\napp.use(express.json());\n\n// In-memory data store for products\nconst products = [];\n\n// Helper to generate a simple unique ID (without external libraries)\nlet nextProductId = 1;\nfunction generateUniqueId() {\n  // Generates a simple, unique-enough string ID for an in-memory store.\n  // Combines a timestamp with an incrementing counter.\n  return `prod-${Date.now()}-${nextProductId++}`;\n}\n\n// POST /products - Create a new product\napp.post('/products', (req, res) => {\n  const { name, description } = req.body;\n\n  // --- Strict Validation for 'name' ---\n  // 1. Must be a string\n  // 2. Cannot be null/undefined (covered by type check)\n  // 3. Cannot be empty (allow_empty: False)\n  // 4. Minimum length of 3 characters (invariant)\n  // 5. Maximum length of 100 characters\n  if (typeof name !== 'string' || name.length === 0) {\n    return res.status(400).json({ error: 'Invalid request payload.' });\n  }\n  if (name.length < 3 || name.length > 100) {\n    return res.status(400).json({ error: 'Invalid request payload.' });\n  }\n\n  // --- Strict Validation for 'description' ---\n  // 1. Must be a string\n  // 2. Cannot be null/undefined (covered by type check)\n  // 3. Can be empty (allow_empty: True) - no check for min length 0\n  // 4. Maximum length of 500 characters\n  if (typeof description !== 'string') {\n    return res.status(400).json({ error: 'Invalid request payload.' });\n  }\n  if (description.length > 500) {\n    return res.status(400).json({ error: 'Invalid request payload.' });\n  }\n\n  // --- Invariant: Product name must be unique ---\n  const existingProduct = products.find(p => p.name === name);\n  if (existingProduct) {\n    return res.status(409).json({ error: 'Product with this name already exists.' });\n  }\n\n  // All validations passed, create the product\n  const newProduct = {\n    id: generateUniqueId(), // System-generated unique string identifier\n    name,\n    description,\n  };\n\n  products.push(newProduct);\n\n  res.status(201).json({ message: 'Product created successfully.' });\n});\n\n// GET /products - Get all products\napp.get('/products', (req, res) => {\n  // Invariant: Products are ordered by name in ascending lexicographical order.\n  const sortedProducts = [...products].sort((a, b) => a.name.localeCompare(b.name));\n\n  res.status(200).json({ data: sortedProducts });\n});\n\nmodule.exports = app;\n"
    }
  ],
  "question_id": "8225c45a-7b40-43f3-b615-9e6a487e2102"
}