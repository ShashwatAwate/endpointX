{
  "language": "javascript",
  "framework": "express",
  "files": [
    {
      "path": "app.js",
      "content": "const express = require('express');\nconst app = express();\napp.use(express.json());\n\n// In-memory data store for products\nconst products = [];\n\n// POST /products\napp.post('/products', (req, res) => {\n    const { sku, name, description } = req.body;\n\n    // 1. Validate existence of required fields\n    if (sku === undefined || name === undefined) {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // 2. Validate types and ensure required string fields are non-empty\n    if (typeof sku !== 'string' || sku.trim().length === 0 ||\n        typeof name !== 'string' || name.trim().length === 0) {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // 3. Validate type for optional description if present\n    if (description !== undefined && typeof description !== 'string') {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // Check for unique SKU\n    const existingProduct = products.find(p => p.sku === sku.trim());\n    if (existingProduct) {\n        return res.status(409).json(\"Product with this SKU already exists.\");\n    }\n\n    // Create new product object, trimming all string inputs\n    const newProduct = {\n        sku: sku.trim(),\n        name: name.trim(),\n    };\n    if (description !== undefined) {\n        newProduct.description = description.trim();\n    }\n\n    products.push(newProduct);\n\n    return res.status(201).json(\"Product created successfully.\");\n});\n\n// PUT /products/{product_sku}\napp.put('/products/:product_sku', (req, res) => {\n    const productSkuParam = req.params.product_sku;\n    const { name, description } = req.body;\n\n    // 1. Validate existence of required field for update\n    if (name === undefined) {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // 2. Validate type and ensure required string field is non-empty\n    if (typeof name !== 'string' || name.trim().length === 0) {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // 3. Validate type for optional description if present\n    if (description !== undefined && typeof description !== 'string') {\n        return res.status(400).json(\"Invalid request body or missing required fields.\");\n    }\n\n    // Find the product by SKU\n    const productIndex = products.findIndex(p => p.sku === productSkuParam);\n\n    // If product not found\n    if (productIndex === -1) {\n        return res.status(404).json(\"Product not found for the given SKU.\");\n    }\n\n    // Update product fields, trimming string inputs\n    products[productIndex].name = name.trim();\n    // If description is provided in the request, update it. Otherwise, leave the existing value.\n    if (description !== undefined) {\n        products[productIndex].description = description.trim();\n    }\n\n    return res.status(200).json(\"Product updated successfully.\");\n});\n\nmodule.exports = app;\n"
    }
  ]
}